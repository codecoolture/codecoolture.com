---
date: "2019-02-04"
language: "Espa침ol"
spoiler:
  "Varios m칠todos de instancia especializados en construir una parte concreta de
  la UI de un componente"
title: "Code Smell: React.MultipleRender"
url: "/blog/react-multiple-render"
published: true
collections:
  - react
---

# React: MultipleRender

El s칤ntoma m치s claro de este _code smell_ es la aparici칩n de varios m칠todos de
instancia tipo `render` especializados en construir una parte de la UI de un
componente React. Suele aparecer especialmente en componentes complejos (o de
gran tama침o, como una p치gina) cuando diferentes partes de la interfaz precisan
de alguna comprobaci칩n o c치lculo extra que afecte a su representaci칩n.

```tsx
export class Blog extends React.Component<{ articles: Article[] }> {
  public render() {
    return (
      <>
        {this.renderHeader()}

        {this.renderArticles()}
      </>
    );
  }

  private renderHeader() {
    const {
      articles: { length: numberOfArticles },
    } = this.props;

    if (numberOfArticles === 0) {
      return (
        <header>
          <p>No articles 游땶</p>
        </header>
      );
    }

    return (
      <header>
        <p>Yay! {numberOfArticles} articles 游꿀</p>
      </header>
    );
  }

  private renderArticles() {
    return this.props.articles.map((article) => {
      return (
        <section>
          <h1>
            <a href={article.url}>{article.title}</a>
          </h1>
        </section>
      );
    });
  }
}
```

En el caso anterior, vemos que la representaci칩n de la cabecera de la p치gina
var칤a en funci칩n del n칰mero de art칤culos que se vayan a mostrar. Del mismo modo
que la l칩gica para pintar la colecci칩n de art칤culos est치 encapsulada en su
propio m칠todo de instancia.

Con echar un simple vistazo al m칠todo `render`, ya vemos con claridad cu치les son
las verdaderas responsabilidades de nuestra p치gina: definir un _layout_ que
muestre una cabecera y una colecci칩n de art칤culos.

쮼s, por tanto, responsabilidad de la p치gina conocer los _internals_ de la
cabecera y la l칩gica necesaria para pintar la colecci칩n de art칤culos? No. Este
componente contiene m치s de una responsabilidad y no cumple con el
[Principio de Responsabilidad 칔nica](https://en.wikipedia.org/wiki/Single_responsibility_principle).

Para mejorar nuestro dise침o, bastar칤a con definir dos nuevos componentes que
encapsulen la l칩gica necesaria para pintar ambas partes. Con este enfoque,
ganar칤amos cierta capacidad para reutilizar esos componentes en otros lugares de
nuestra interfaz (aunque no es condici칩n necesaria para crear un nuevo
componente) a la vez que reducimos la complejidad del componente padre, que no
necesita ya llevar consigo toda la l칩gica de las diferentes partes que la
conforman.

Adem치s, si segu칤s un enfoque de integraci칩n y entrega continua, ver칠is que es
mucho m치s sencillo [aplicar _feature flags_](/blog/branch-by-abstraction-react)
sobre estos peque침os componentes de vuestra interfaz en lugar de en mitad de
componentes grandes y complejos, donde se estar칤an mezclando responsabilidades y
requisitos de distintas partes de la aplicaci칩n.

```tsx
import { Articles } from "./components/Articles";
import { Header } from "./components/Header";

export function Blog(props: { articles: Article[] }) {
  return (
    <>
      <Header {...props} />

      <Articles {...props} />
    </>
  );
}
```

Este _code smell_ est치 relacionado con otros de prop칩sito general (no
relacionados directamente con React) como
[_Large Class_](https://sourcemaking.com/refactoring/smells/large-class) y
t칠cnicas de _refactoring_ como
[Extract Class](https://refactoring.guru/extract-class).
